<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Imposter - Social Deduction Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .setup-section {
            margin-bottom: 25px;
        }

        label {
            display: block;
            color: #555;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        input[type="text"], select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .toggle-label {
            font-weight: 600;
            color: #555;
            margin: 0;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #ccc;
            border-radius: 30px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: #667eea;
        }

        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(30px);
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-small {
            width: auto;
            padding: 8px 15px;
            font-size: 0.9em;
            margin-top: 0;
            margin-left: 10px;
        }

        .player-name-input-container {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .player-name-input-container input {
            flex: 1;
            margin: 0;
        }

        .players-list {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
        }

        .player-item {
            padding: 12px;
            margin-bottom: 10px;
            background: white;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #667eea;
        }

        .player-name {
            font-weight: 600;
            color: #333;
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .remove-btn:hover {
            background: #c82333;
        }

        .name-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .name-button {
            padding: 30px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .name-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .name-button.viewed {
            background: #6c757d;
            opacity: 0.6;
        }

        .word-reveal {
            text-align: center;
            padding: 40px 20px;
        }

        .secret-word {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            margin: 30px 0;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .imposter-word {
            color: #dc3545;
        }

        .hint-word {
            font-size: 1.2em;
            color: #6c757d;
            font-style: italic;
            margin-top: 10px;
        }

        .voting-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .player-vote-btn {
            padding: 20px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .player-vote-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .player-vote-btn.voted {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .results {
            text-align: center;
            padding: 20px;
        }

        .result-message {
            font-size: 1.5em;
            font-weight: bold;
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
        }

        .civilians-win {
            background: #d4edda;
            color: #155724;
        }

        .imposter-win {
            background: #f8d7da;
            color: #721c24;
        }

        .hidden {
            display: none;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #667eea;
            position: absolute;
            animation: confetti-fall 3s linear;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .info-text {
            color: #6c757d;
            font-size: 0.9em;
            margin-top: 10px;
            text-align: center;
        }

        .warning-text {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Setup Screen -->
        <div id="setup-screen">
            <h1>üé≠ The Imposter</h1>
            
            <div class="setup-section">
                <label>Add Players (minimum 3)</label>
                <div class="player-name-input-container">
                    <input type="text" id="new-player-name" placeholder="Enter player name..." maxlength="20">
                    <button class="btn btn-small" onclick="addPlayer()">Add</button>
                </div>
            </div>

            <div class="players-list" id="players-list-setup">
                <p class="info-text" id="no-players-text">No players added yet</p>
            </div>

            <div class="setup-section">
                <label for="category">Category</label>
                <select id="category">
                    <option value="movies">üé¨ Movies</option>
                    <option value="food">üçï Food</option>
                    <option value="jobs">üíº Jobs</option>
                    <option value="animals">ü¶Å Animals</option>
                    <option value="sports">‚öΩ Sports</option>
                    <option value="countries">üåç Countries</option>
                    <option value="brands">üè∑Ô∏è Brands</option>
                    <option value="celebrities">‚≠ê Celebrities</option>
                    <option value="technology">üíª Technology</option>
                    <option value="hobbies">üé® Hobbies</option>
                </select>
            </div>

            <div class="setup-section">
                <div class="toggle-container">
                    <span class="toggle-label">Give Imposter a Starter Word</span>
                    <div class="toggle-switch" id="hint-toggle">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>

            <button class="btn" onclick="startGame()">Start Game</button>
        </div>

        <!-- Name Selection Screen -->
        <div id="name-select-screen" class="hidden">
            <h2>Click Your Name</h2>
            <p class="info-text">Each player should click their own name to see their role</p>
            
            <div class="warning-text">
                ‚ö†Ô∏è Make sure others aren't looking!
            </div>

            <div class="name-grid" id="name-grid"></div>

            <button class="btn btn-secondary" onclick="showVoting()">Start Voting</button>
        </div>

        <!-- Word Reveal Screen -->
        <div id="word-screen" class="hidden">
            <div class="word-reveal">
                <h2 id="player-name-display"></h2>
                <div class="secret-word" id="secret-word-display"></div>
                <p class="hint-word" id="hint-display"></p>
                <p class="info-text">Remember your role and give clues in person!</p>
                <button class="btn" onclick="backToNames()">Back to Names</button>
            </div>
        </div>

        <!-- Voting Screen -->
        <div id="voting-screen" class="hidden">
            <h2>Who is the Imposter?</h2>
            <p class="info-text">Discuss and vote!</p>
            <div class="voting-grid" id="voting-grid"></div>
            <button class="btn" onclick="tallyVotes()">Reveal Results</button>
        </div>

        <!-- Imposter Guess Screen -->
        <div id="guess-screen" class="hidden">
            <h2>Imposter's Last Chance!</h2>
            <p style="text-align: center; color: #6c757d; margin: 20px 0;">The Imposter survived! Can they guess the secret word?</p>
            <input type="text" style="width: 100%; padding: 15px; font-size: 1.2em; border: 2px solid #ddd; border-radius: 10px; margin-bottom: 20px;" id="imposter-guess" placeholder="Enter your guess...">
            <button class="btn" onclick="checkImposterGuess()">Submit Guess</button>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden">
            <div class="results">
                <h2>Game Over!</h2>
                <div class="result-message" id="result-message"></div>
                <p id="reveal-info" style="font-size: 1.2em; margin: 20px 0;"></p>
                <button class="btn" onclick="resetGame()">Play Again</button>
            </div>
        </div>
    </div>

    <script>
        // Game data
        const wordDatabase = {
            movies: ['Titanic', 'Avatar', 'Inception', 'Jaws', 'Frozen', 'Shrek', 'Gladiator', 'Casablanca', 'Rocky', 'Alien', 'Psycho', 'Batman', 'Superman', 'Jumanji', 'Madagascar', 'Finding Nemo', 'Toy Story', 'Matrix', 'Joker', 'Aladdin'],
            food: ['Pizza', 'Burger', 'Sushi', 'Pasta', 'Tacos', 'Sandwich', 'Salad', 'Steak', 'Chicken', 'Lobster', 'Donut', 'Cookie', 'Cake', 'Pancake', 'Waffle', 'Noodles', 'Rice', 'Bread', 'Cheese', 'Chocolate'],
            jobs: ['Doctor', 'Teacher', 'Chef', 'Engineer', 'Lawyer', 'Nurse', 'Pilot', 'Scientist', 'Artist', 'Musician', 'Writer', 'Actor', 'Dentist', 'Plumber', 'Electrician', 'Mechanic', 'Architect', 'Photographer', 'Veterinarian', 'Firefighter'],
            animals: ['Lion', 'Elephant', 'Giraffe', 'Penguin', 'Dolphin', 'Tiger', 'Bear', 'Monkey', 'Zebra', 'Kangaroo', 'Panda', 'Koala', 'Whale', 'Shark', 'Eagle', 'Owl', 'Butterfly', 'Octopus', 'Turtle', 'Crocodile'],
            sports: ['Soccer', 'Basketball', 'Tennis', 'Baseball', 'Football', 'Swimming', 'Golf', 'Volleyball', 'Hockey', 'Boxing', 'Skiing', 'Surfing', 'Cycling', 'Running', 'Wrestling', 'Gymnastics', 'Archery', 'Bowling', 'Cricket', 'Rugby'],
            countries: ['France', 'Japan', 'Brazil', 'Egypt', 'Australia', 'Canada', 'Italy', 'Spain', 'Mexico', 'China', 'India', 'Germany', 'Russia', 'Greece', 'Thailand', 'Turkey', 'Argentina', 'Sweden', 'Norway', 'Ireland'],
            brands: ['Nike', 'Apple', 'Google', 'Amazon', 'Disney', 'McDonald', 'Coca-Cola', 'Samsung', 'Toyota', 'Adidas', 'Starbucks', 'Tesla', 'Netflix', 'Spotify', 'Instagram', 'Microsoft', 'Sony', 'Pepsi', 'Ferrari', 'Gucci'],
            celebrities: ['Beyonce', 'Taylor Swift', 'Rihanna', 'Drake', 'Ronaldo', 'Messi', 'LeBron', 'Oprah', 'Elvis', 'Madonna', 'Einstein', 'Shakespeare', 'Picasso', 'Mozart', 'Lincoln', 'Gandhi', 'Cleopatra', 'Newton', 'Columbus', 'Napoleon'],
            technology: ['Smartphone', 'Laptop', 'Internet', 'Robot', 'Satellite', 'Drone', 'Bluetooth', 'WiFi', 'Camera', 'Television', 'Radio', 'Microwave', 'Tablet', 'Headphones', 'Keyboard', 'Mouse', 'Printer', 'Monitor', 'Speaker', 'Charger'],
            hobbies: ['Reading', 'Painting', 'Gaming', 'Cooking', 'Dancing', 'Singing', 'Photography', 'Gardening', 'Fishing', 'Hiking', 'Camping', 'Knitting', 'Drawing', 'Writing', 'Traveling', 'Collecting', 'Yoga', 'Meditation', 'Puzzles', 'Chess']
        };

        let gameState = {
            players: [],
            category: 'movies',
            giveHint: false,
            secretWord: '',
            hintWord: '',
            imposterIndex: 0,
            viewedPlayers: [],
            votes: {},
            phase: 'setup'
        };

        // Toggle hint
        document.getElementById('hint-toggle').addEventListener('click', function() {
            this.classList.toggle('active');
            gameState.giveHint = this.classList.contains('active');
        });

        // Add player with Enter key
        document.getElementById('new-player-name').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addPlayer();
            }
        });

        function addPlayer() {
            const input = document.getElementById('new-player-name');
            const name = input.value.trim();

            if (!name) {
                alert('Please enter a name!');
                return;
            }

            if (gameState.players.includes(name)) {
                alert('This name is already added!');
                return;
            }

            gameState.players.push(name);
            input.value = '';
            updatePlayersList();
        }

        function removePlayer(index) {
            gameState.players.splice(index, 1);
            updatePlayersList();
        }

        function updatePlayersList() {
            const list = document.getElementById('players-list-setup');
            const noPlayersText = document.getElementById('no-players-text');

            if (gameState.players.length === 0) {
                noPlayersText.style.display = 'block';
                list.innerHTML = '<p class="info-text" id="no-players-text">No players added yet</p>';
                return;
            }

            noPlayersText.style.display = 'none';
            list.innerHTML = gameState.players.map((player, index) => `
                <div class="player-item">
                    <span class="player-name">${player}</span>
                    <button class="remove-btn" onclick="removePlayer(${index})">Remove</button>
                </div>
            `).join('');
        }

        function startGame() {
            if (gameState.players.length < 3) {
                alert('You need at least 3 players to start!');
                return;
            }

            const category = document.getElementById('category').value;
            gameState.category = category;
            gameState.imposterIndex = Math.floor(Math.random() * gameState.players.length);
            gameState.viewedPlayers = [];
            gameState.votes = {};

            // Pick random word
            const words = wordDatabase[category];
            gameState.secretWord = words[Math.floor(Math.random() * words.length)];

            // Pick hint word if enabled
            if (gameState.giveHint) {
                const hintWords = words.filter(w => w !== gameState.secretWord);
                gameState.hintWord = hintWords[Math.floor(Math.random() * hintWords.length)];
            }

            showNameSelection();
        }

        function showNameSelection() {
            const nameGrid = document.getElementById('name-grid');
            
            nameGrid.innerHTML = gameState.players.map((player, index) => `
                <button class="name-button ${gameState.viewedPlayers.includes(index) ? 'viewed' : ''}" 
                        onclick="revealRole(${index})"
                        id="name-btn-${index}">
                    ${player}
                </button>
            `).join('');

            showScreen('name-select-screen');
        }

        function revealRole(playerIndex) {
            const isImposter = playerIndex === gameState.imposterIndex;
            const playerName = gameState.players[playerIndex];

            document.getElementById('player-name-display').textContent = playerName;
            
            const wordDisplay = document.getElementById('secret-word-display');
            const hintDisplay = document.getElementById('hint-display');

            if (isImposter) {
                wordDisplay.textContent = 'üé≠ YOU ARE THE IMPOSTER';
                wordDisplay.classList.add('imposter-word');
                
                if (gameState.giveHint) {
                    hintDisplay.textContent = `Hint: ${gameState.hintWord}`;
                    hintDisplay.style.display = 'block';
                } else {
                    hintDisplay.style.display = 'none';
                }
            } else {
                wordDisplay.textContent = gameState.secretWord;
                wordDisplay.classList.remove('imposter-word');
                hintDisplay.style.display = 'none';
            }

            // Mark as viewed
            if (!gameState.viewedPlayers.includes(playerIndex)) {
                gameState.viewedPlayers.push(playerIndex);
            }

            showScreen('word-screen');
        }

        function backToNames() {
            showNameSelection();
        }

        function showVoting() {
            const votingGrid = document.getElementById('voting-grid');
            votingGrid.innerHTML = '';

            gameState.players.forEach((player, index) => {
                const btn = document.createElement('button');
                btn.className = 'player-vote-btn';
                btn.textContent = player;
                btn.onclick = () => voteForPlayer(index, btn);
                votingGrid.appendChild(btn);
            });

            gameState.votes = {};
            showScreen('voting-screen');
        }

        function voteForPlayer(playerIndex, btn) {
            if (!gameState.votes[playerIndex]) {
                gameState.votes[playerIndex] = 0;
            }
            gameState.votes[playerIndex]++;
            btn.classList.add('voted');
        }

        function tallyVotes() {
            let maxVotes = 0;
            let votedPlayer = -1;

            for (let player in gameState.votes) {
                if (gameState.votes[player] > maxVotes) {
                    maxVotes = gameState.votes[player];
                    votedPlayer = parseInt(player);
                }
            }

            if (votedPlayer === -1) {
                alert('Please vote for someone!');
                return;
            }

            if (votedPlayer === gameState.imposterIndex) {
                showResults(true, false);
            } else {
                showScreen('guess-screen');
            }
        }

        function checkImposterGuess() {
            const guess = document.getElementById('imposter-guess').value.trim().toLowerCase();
            const secretWord = gameState.secretWord.toLowerCase();

            if (guess === secretWord) {
                showResults(false, true);
            } else {
                showResults(true, false);
            }
        }

        function showResults(civiliansWin, imposterGuessedCorrectly) {
            const resultMessage = document.getElementById('result-message');
            const revealInfo = document.getElementById('reveal-info');
            const imposterName = gameState.players[gameState.imposterIndex];

            if (civiliansWin) {
                if (imposterGuessedCorrectly) {
                    resultMessage.textContent = 'üé≠ Imposter Wins!';
                    resultMessage.className = 'result-message imposter-win';
                    revealInfo.textContent = `The Imposter (${imposterName}) guessed the word correctly: ${gameState.secretWord}`;
                } else {
                    resultMessage.textContent = 'üë• Civilians Win!';
                    resultMessage.className = 'result-message civilians-win';
                    revealInfo.textContent = `The Imposter was ${imposterName}. The secret word was: ${gameState.secretWord}`;
                    createConfetti();
                }
            } else {
                resultMessage.textContent = 'üé≠ Imposter Wins!';
                resultMessage.className = 'result-message imposter-win';
                revealInfo.textContent = `The Imposter (${imposterName}) survived! The secret word was: ${gameState.secretWord}`;
            }

            showScreen('results-screen');
        }

        function createConfetti() {
            const colors = ['#667eea', '#764ba2', '#f093fb', '#4facfe'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        function resetGame() {
            gameState.players = [];
            gameState.viewedPlayers = [];
            gameState.votes = {};
            updatePlayersList();
            showScreen('setup-screen');
        }

        function showScreen(screenId) {
            const screens = ['setup-screen', 'name-select-screen', 'word-screen', 'voting-screen', 'guess-screen', 'results-screen'];
            screens.forEach(screen => {
                document.getElementById(screen).classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
        }
    </script>
</body>
</html>